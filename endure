#!/bin/bash
time=300
if [[ -n "$1" ]]; then
  if [[ "$1" =~ ^[0-9]*$ ]]; then
    time="$(($1 * 60))"
  elif [[ "$1" =~ ^[0-9]*s$ ]]; then
    time="${1%%s*}"
  fi
fi

$HOME/toys/sexy-slideshow 50 50 100 150 4 &
pid=$!

for i in $(seq 1 $time); do
  sleep 1
  if ! ps $pid &>/dev/null; then
    printf "%g seconds remaining\n" $((time - i))
    break
  fi
done

if ps $pid &>/dev/null; then
  kill $pid
fi
